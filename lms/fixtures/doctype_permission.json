[
 {
  "amended_from": null,
  "conditions": [
   {
    "parent": "LMS Course Country Permission",
    "parentfield": "conditions",
    "parenttype": "DocType Permission",
    "perm_level": "Custom Query",
    "role": "LMS Student",
    "script": "user_roles = [d.role for d in frappe.db.get_all('Has Role', filters={'parent': user}, fields=['role'])]\nuser_country = frappe.db.get_value('User', user, 'country')\nconditions = []\n# if 'Employee' in user_roles:\n#     conditions.append(\"custom_assigned_to_role = 'Employee'\")\nif 'Distributor' in user_roles:\n    conditions.append(\"custom_assigned_to_role = 'Distributor'\")\nif user_country:\n    conditions.append(f\"custom_country = '{user_country}'\")\n\nconditions = ' and '.join(conditions) if conditions else 'false'"
   }
  ],
  "description": "Restrict access to LMS Courses to users whose country matches the course's country and Distributor and Employee.",
  "docstatus": 0,
  "doctype": "DocType Permission",
  "modified": "2025-07-03 16:37:14.408528",
  "name": "LMS Course Country Permission",
  "ref_doctype": "LMS Course",
  "testing": 1,
  "title": "LMS Course Country Permission"
 },
 {
  "amended_from": null,
  "conditions": [
   {
    "parent": "LMS Course Admin Full Access",
    "parentfield": "conditions",
    "parenttype": "DocType Permission",
    "perm_level": "Custom Query",
    "role": "Administrator",
    "script": "conditions = 'true'"
   }
  ],
  "description": "Allow Administrator to see all LMS Courses.",
  "docstatus": 0,
  "doctype": "DocType Permission",
  "modified": "2025-07-02 12:51:01.310354",
  "name": "LMS Course Admin Full Access",
  "ref_doctype": "LMS Course",
  "testing": 1,
  "title": "LMS Course Admin Full Access"
 }
]